@model MEF.PROYECTO.Entity.Administracion.Cls_Ent_Entidades
@{
    ViewBag.Title = "Index";
}
@using (Html.BeginForm("ProcesoFag", "Index", new { @area = "Coordinador" }, FormMethod.Post, new { @id = "frmIndex", @class = "form-horizontal", @Role = "dialog" }))
{
    <div class="row">
        <div class="col-md-12">
            <div class="card card-danger card-outline">
                <div class="card-body">
                    <ul class="nav nav-tabs" id="custom-content-above-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="custom-content-above-profile-tab" data-toggle="pill" href="#custom-content-above-profile" role="tab" aria-controls="custom-content-above-profile" aria-selected="false">
                                Datos de la entidad
                                <span class="badge badge-danger navbar-badge" style="right:auto;font-size:.8rem;font-weight:500;">Tener actualizado los datos de la entidad</span>
                            </a>
                        </li>
                    </ul>
                    <div class="tab-custom-content">
                        <p id="LblEnt" class="lead mb-0" style="font-weight:bold;color:#4a4a49"></p>
                    </div>
                    <div class="tab-content" id="custom-content-above-tabContent">
                        <div class="tab-pane fade show active" id="custom-content-above-profile" role="tabpanel" aria-labelledby="custom-content-above-profile-tab">
                            <div class="col-md-12">
                                <div class="card card-default">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>RUC:<b style="color:red">*</b></label>
                                                    @Html.TextBoxFor(model => model.RUC, new { @class = "form-control", @maxlength = "11", @onkeypress = "DESARROLLO.SOLONUMEROS(event);" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group mb-1">
                                                    <label>Dirección:<b style="color:red">*</b></label>
                                                    @Html.TextBoxFor(model => model.DIRECCION, new { @class = "form-control", @maxlength = "500" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>Departamento:<b style="color:red">*</b></label>
                                                    @Html.DropDownListFor(M => M.COD_DEPA, Model.ListaDpto, new { @class = "form-control" })
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>Pronvicia:<b style="color:red">*</b></label>
                                                    <select name="COD_PROVINCIA" id="COD_PROVINCIA" class="form-control" data-width="100%">
                                                        <option value="">-- Seleccione --</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>Distrito:<b style="color:red">*</b></label>
                                                    <select name="COD_DISTRITO" id="COD_DISTRITO" class="form-control" data-width="100%">
                                                        <option value="">-- Seleccione --</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>Representante de entidad:<b style="color:red">*</b></label>
                                                    @Html.TextBoxFor(model => model.REPRESENTANTE, new { @class = "form-control", @maxlength = "500" })
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>DNI:<b style="color:red">*</b></label>
                                                    @Html.TextBoxFor(model => model.DNI_AUTORIDAD, new { @class = "form-control", @maxlength = "8", @onkeypress = "DESARROLLO.SOLONUMEROS(event);" })
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>Cargo:<b style="color:red">*</b></label>
                                                    @Html.TextBoxFor(model => model.CARGO_AUTORIDAD, new { @class = "form-control", @maxlength = "500" })
                                                </div>
                                            </div>



                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>Tipo Resolución:<b style="color:red">*</b></label>
                                                    @Html.TextBoxFor(model => model.TIPO_RESOLUCION, new { @class = "form-control", @maxlength = "500" })
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group mb-1">
                                                    <label>N° Resolución:<b style="color:red">*</b></label>
                                                    @Html.TextBoxFor(model => model.NUMERO_RESOLUCION, new { @class = "form-control", @maxlength = "500", @onkeypress = "DESARROLLO.SOLONUMEROS(event);" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12" style="text-align:right">
                                                <button id="btnGrabarDatosEntidad" type="button" class="btn btn-danger">Actualizar Datos de Entidad</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @Html.HiddenFor(m => m.COD_PROV)
    @Html.HiddenFor(m => m.COD_DIST)
}
<script src="@Url.Content("~/Scripts/js/Remove.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/js/Coordinador/Fag.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $('#LblEnt').text($('#inputHddDescEntidad').val());
        callProv($("#COD_DEPA").val(), "COD_PROVINCIA");
        callDist("COD_DEPA", $("#COD_PROV").val(), "COD_DISTRITO");
        Remove_RemoverClases("liDatosEntidad");
    });
    $("#COD_DEPA").change(function () {
        var e = $(this).val();
        callProv(e, "COD_PROVINCIA");
    });
    $("#COD_PROVINCIA").change(function () {
        var i = $(this).val();
        callDist("COD_DEPA", i, "COD_DISTRITO");
    });
    jQuery("#btnGrabarDatosEntidad").click(function (e) {
        if (ValidateEntidad()) {
            DESARROLLO.PROCESO_CONFIRM("</br>¿Desea <b>Actualizar</b> los datos de la entidad.? </br>", function (r) {
                if (r) {
                    fn_UpdateDatosEntidad();
                }
            })
        }
    });
    function ValidateEntidad() {
        var result = true;
        if ($("#RUC").val() == "") {
            $("#RUC").addClass('is-invalid'); result = false;
        } else { $("#RUC").removeClass('is-invalid'); }
        if ($("#DIRECCION").val() == "") {
            $("#DIRECCION").addClass('is-invalid'); result = false;
        } else { $("#DIRECCION").removeClass('is-invalid'); }
        if ($("#COD_DEPA").val() == "") {
            $("#COD_DEPA").addClass('is-invalid'); result = false;
        } else { $("#COD_DEPA").removeClass('is-invalid'); }
        if ($("#COD_PROVINCIA").val() == "") {
            $("#COD_PROVINCIA").addClass('is-invalid'); result = false;
        } else { $("#COD_PROVINCIA").removeClass('is-invalid'); }
        if ($("#COD_DISTRITO").val() == "") {
            $("#COD_DISTRITO").addClass('is-invalid'); result = false;
        } else { $("#COD_DISTRITO").removeClass('is-invalid'); }
        if ($("#REPRESENTANTE").val() == "") {
            $("#REPRESENTANTE").addClass('is-invalid'); result = false;
        } else { $("#REPRESENTANTE").removeClass('is-invalid'); }
        if ($("#TIPO_RESOLUCION").val() == "") {
            $("#TIPO_RESOLUCION").addClass('is-invalid'); result = false;
        } else { $("#TIPO_RESOLUCION").removeClass('is-invalid'); }
        if ($("#NUMERO_RESOLUCION").val() == "") {
            $("#NUMERO_RESOLUCION").addClass('is-invalid'); result = false;
        } else { $("#NUMERO_RESOLUCION").removeClass('is-invalid'); }
        if ($("#CARGO_AUTORIDAD").val() == "") {
            $("#CARGO_AUTORIDAD").addClass('is-invalid'); result = false;
        } else { $("#CARGO_AUTORIDAD").removeClass('is-invalid'); }
        if ($("#DNI_AUTORIDAD").val() == "") {
            $("#DNI_AUTORIDAD").addClass('is-invalid'); result = false;
        } else { $("#DNI_AUTORIDAD").removeClass('is-invalid'); }

        return result;
    }
</script>