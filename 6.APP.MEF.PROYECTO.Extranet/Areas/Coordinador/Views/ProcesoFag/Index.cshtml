@model MEF.PROYECTO.Entity.Administracion.Cls_Ent_Entidades
@{
    ViewBag.Title = "Index";
}
@using (Html.BeginForm("ProcesoFag", "Index", new { @area = "Coordinador" }, FormMethod.Post, new { @id = "frmIndex", @class = "form-horizontal", @Role = "dialog" }))
{
    <div class="row">
        <div class="col-md-12">
            <div class="card card-danger card-outline">
                <div class="card-body">
                    <ul class="nav nav-tabs" id="custom-content-above-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="custom-content-above-home-tab" data-toggle="pill" href="#custom-content-above-home" role="tab" aria-controls="custom-content-above-home" aria-selected="true">Solicitudes</a>
                        </li>
                    </ul>
                    <div class="tab-custom-content">
                        <p id="LblEnt" class="lead mb-0" style="font-weight:bold;color:#4a4a49"></p>
                    </div>
                    <div class="tab-content" id="custom-content-above-tabContent">
                        <div class="tab-pane fade show active" id="custom-content-above-home" role="tabpanel" aria-labelledby="custom-content-above-home-tab">
                            <div class="col-md-12">
                                <div class="card card-default">
                                    <div class="card-header" style="background: #d2d3d5;color:#4b4b4d">
                                        <h4 class="card-title">Buscar por:</h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">

                                            <div class="col-sm-2">
                                                <label>N° Solicitud</label>
                                                <input type="text" id="txtTdr" name="txtTdr" class="form-control" placeholder="N° Solicitud" />
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label>Descripción de Cargo</label>
                                                    <input type="text" id="txtDesc" name="txtDesc" class="form-control" placeholder="Descripción de Cargo" />

                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <label>Fecha de creación</label>
                                                <input type="text" class="form-control datetimepicker-input" id="FechaCreacion" data-toggle="datetimepicker" data-target="#FechaCreacion" />

                                            </div>
                                            <div class="col-sm-4">
                                                <label>Estado:</label>
                                                <select name="DdlEstado" id="DdlEstado" class="form-control" data-width="100%">
                                                    <option value="" >TODOS</option>
                                                    <option value="001" selected>SOLICITUD REGISTRADA</option>
                                                    <option value="002">SOLICITUD REMITIDA A PROFESIONAL PARA REGISTRO</option>
                                                    <option value="003">FORMATOS DE PROFESIONAL PARA REVISIÓN Y APROBACIÓN</option>
                                                    <option value="004">FORMATOS Y/O REGISTROS OBSERVADOS</option>
                                                    <option value="005">FORMATOS Y/O REGISTROS SUBSANADOS</option>
                                                    <option value="006">EXPEDIENTE ENVIADO A UTP</option>
                                                    <option value="007">CONTRATO APROBADO</option>
                                                    <option value="008">REGISTRO DE CONTRATO OBSERVADO</option>
                                                    <option value="009">REGISTRO DE CONTRATO RECHAZADO</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12  text-right">
                                                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#modal-FormatoTipo">Nueva Solicitud </button>
                                                <button id="btnConsultarFag" type="button" class="btn btn-danger">Buscar</button>
                                                <button id="btnLimpiarFag" type="button" class="btn btn-dark" title="Limpiar Búsqueda"> Limpiar </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12" style="margin-top:20px">
                                    <div class="col-sm-12 text-right">
                                        <button id="btnDescargaFag" type="button" class="btn" style="font-weight:bold;color:green"><i class="fas fa-file-excel"></i> Exportar</button>
                                    </div>
                                    <div class="table-responsive">
                                        <table id="TableSolicitudFag" class="table table-bordered dt-responsive dataTable table-hover" style="width: 100%; white-space: nowrap;">
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modalNuevoEditaSolicitudFag" role="dialog" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalFormatoFag" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalTDR" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalEvaluarPro" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalVerContrato" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalSubsanacion" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalObservacion" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalEnvioUtp" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    <div class="modal fade" id="modalDoc" role="dialog" data-backdrop="static" data-keyboard="false" style=" overflow: scroll;">
        <div class='seccionModal'>
        </div>
    </div>
    @*
    <div class="modal fade" id="modal-FormatoTipo" role="dialog" data-backdrop="static" data-keyboard="false" style="z-index: 1051; padding-top: 250px; background-color: rgba(1,1,1,0.2);">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-list-ol"></i>&nbsp;TIPO FORMATO</h5>
                    <button type="button" class="close cerrar_ft" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <button id="btnNuevaSolicitudFag" type="button" class="btn btn-outline-danger btn-block btn-sm" style="width:100%"><i class="fas fa-file-signature"></i>&nbsp; ANEXO 1 - REQUERIMIENTO DE CONSULTOR FAG <br> <b>(HASTA JULIO 2023)</b></button>
                            <button id="btnNuevaSolicitudFagCEU" type="button" class="btn btn-outline-danger btn-block btn-sm" style="width:100%"><i class="fas fa-file-signature"></i>&nbsp; ANEXO N° 1-A EGRESADO DE CURSO DE EXTENSIÓN UNIVERSITARIA</button>
                            <button id="btnNuevaSolicitudFag2" type="button" class="btn btn-outline-danger btn-block btn-sm" style="width:100%"><i class="fas fa-file-signature"></i>&nbsp; ANEXO N° 1-B REQUERIMIENTO DE CONSULTOR FAG <br> <b>(VIGENCIA DESDE JULIO 2023)</b></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    *@
    <div class="modal" id="myModalCargando" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true" style="z-index: 1051; padding-top: 300px; background-color: rgba(1,1,1,0.2);">
        <div class="d-flex justify-content-center">
            <div class="spinner-border text-danger" style="width: 3.5rem; height: 3.5rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <label style="font-weight:600;color:white;width:100%;text-align:center;font-size:1.2rem">Cargando..</label>
    </div>
    @Html.HiddenFor(m => m.COD_PROV)
    @Html.HiddenFor(m => m.COD_DIST)
}
<script src="@Url.Content("~/Scripts/js/Remove.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/js/Coordinador/Fag.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $('#FechaCreacion').datetimepicker({
            format: 'DD/MM/YYYY',
            locale: 'es'
        });
        $('#LblEnt').text($('#inputHddDescEntidad').val());
        callProv($("#COD_DEPA").val(), "COD_PROVINCIA");
        callDist("COD_DEPA", $("#COD_PROV").val(), "COD_DISTRITO");
        Remove_RemoverClases("liFag");
        CrearGrillaSolicitudesFag();
        CargarGrillaSolicitudesFag();
    });
    jQuery("#btnLimpiarFag").click(function (e) {
        $("#txtTdr").val("");
        $("#txtDesc").val("");
        $("#FechaCreacion").val("");
        $("#DdlEstado").val("");


    });
    jQuery("button[data-target='#modal-FormatoTipo']").click(function () {
        fn_wizardNuevaSolicitud(0);
    })
    function fn_wizardNuevaSolicitud(idsolicitud) {
        let url = baseUrl + "Coordinador/ProcesoFag/WizardNuevaSolicitud";

        jQuery("#modalNuevoEditaSolicitudFag").html('');
        jQuery("#modalNuevoEditaSolicitudFag").load(url, function (responseText, textStatus, request) {
            $("#modalNuevoEditaSolicitudFag").modal('show');
            //$(".modal-content").draggable({
            //    handle: ".modal-header", cursor: "move"
            //})
        });
    }
</script>
